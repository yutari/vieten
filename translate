const graviteeManagementModule = angular.module('gravitee-management');

graviteeManagementModule.config(['$translateProvider', '$translateSanitizationProvider', function ($translateProvider, $translateSanitizationProvider) {
  // Cấu hình loader để tải các tệp ngôn ngữ từ thư mục tĩnh
  $translateProvider.useStaticFilesLoader({
    prefix: 'assets/i18n/',
    suffix: '.json'
  });

  // Cấu hình các ngôn ngữ có sẵn
  $translateProvider.preferredLanguage('vi');
  $translateProvider.fallbackLanguage('vi');

  // Cấu hình chiến lược làm sạch dữ liệu
  $translateSanitizationProvider.useStrategy('sanitizeParameters');
}]);

graviteeManagementModule.controller('LanguageController', ['$scope', '$translate', function($scope, $translate) {
    // Thiết lập ngôn ngữ hiện tại
    $scope.currentLanguage = $translate.use();

    // Hàm thay đổi ngôn ngữ
    $scope.changeLanguage = function(langKey) {
        $translate.use(langKey);  // Cập nhật ngôn ngữ trong ứng dụng
        $scope.currentLanguage = langKey;  // Cập nhật ngôn ngữ hiện tại trong scope
    };
}]);

